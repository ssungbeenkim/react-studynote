import React, { useReducer } from 'react';
import personReducer from './reducer/person-reducer';

/* 
ì„±ëŠ¥
ë¬¸ì œë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì§‘ì°©í•˜ì§€ëŠ” ì•Šì•„ë„ ì¢‹ë‹¤. 
*í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ëŠ” propsì™€ stateê°€ ë³€ê²½ë  ë•Œ ë§ˆë‹¤ ë¦¬ë Œë”ë§ì´ ëœë‹¤.
*ì½˜ì†” ì»´í¬ë„ŒíŠ¸ ì„¸íŒ…ì—ì„œ í•˜ì´ë¼ì´íŠ¸ë¡œ ì–´ë””ê¹Œì§€ ë¦¬ë Œë”ë§ì´ ë˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
*/

export default function AppReducerButton() {
  const [person, dispatch] = useReducer(personReducer, initialPerson);

  const handleUpdate = () => {
    // ë¦¬ë Œë”ë§ ë  ë•Œë§ˆë‹¤ handleUpdateì— ìƒˆë¡œì´ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ ë§Œë“  í•¨ìˆ˜ ê°ì²´ì˜ ì°¸ì¡°ê°’ì„ í• ë‹¹í•œë‹¤.
    const prev = prompt(`ëˆ„êµ¬ì˜ ì´ë¦„ì„ ë°”ê¾¸ê³  ì‹¶ì€ê°€ìš”?`);
    const current = prompt(`ì´ë¦„ì„ ë¬´ì—‡ìœ¼ë¡œ ë°”ê¾¸ê³  ì‹¶ì€ê°€ìš”?`);
    dispatch({ type: 'updated', prev, current });
  };

  const handleAdd = () => {
    const name = prompt(`ë©˜í† ì˜ ì´ë¦„ì€?`);
    const title = prompt(`ë©˜í† ì˜ ì§í•¨ì€?`);
    dispatch({ type: 'added', name, title });
  };

  const handleDelete = () => {
    const name = prompt(`ëˆ„êµ¬ë¥¼ ì‚­ì œí•˜ê³  ì‹¶ì€ê°€ìš”?`);
    dispatch({ type: 'deleted', name });
  };

  return (
    <div>
      <h1>
        {person.name}ëŠ” {person.title}
      </h1>
      <p>{person.name}ì˜ ë©˜í† ëŠ”:</p>
      <ul>
        {person.mentors.map((mentor, index) => (
          <li key={index}>
            {mentor.name} ({mentor.title})
          </li>
        ))}
      </ul>
      <Button text='ë©˜í†  ì´ë¦„ ë°”ê¾¸ê¸°' onClick={handleUpdate} />
      <Button text='ë©˜í†  ì¶”ê°€í•˜ê¸°' onClick={handleAdd} />
      <Button text='ë©˜í†  ì‚­ì œí•˜ê¸°' onClick={handleDelete} />
    </div>
  );
  /* 
  í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ê°€ ìˆê³  í”„ë¡­ìœ¼ë¡œ ì „ë‹¬ë˜ëŠ” ê°’ë“¤ì´ ë¶€ëª¨ ì»¨í…Œì´ë„ˆê°€ ë Œë”ë§ì´ ë  ë•Œë§ˆë‹¤ ìƒˆë¡­ê²Œ ë§Œë“¤ì–´ì§„ í•¨ìˆ˜ ê°ì²´ê°€ ìƒˆë¡œ í• ë‹¹ëœë‹¤.
  textì—ë„ ìƒˆë¡œìš´ ë¬¸ìì—´ì´ í• ë‹¹ëœë‹¤.
  propsë¡œ ì „ë‹¬í•˜ëŠ” ê°’ë“¤ì´ ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒˆë¡­ê²Œ í• ë‹¹ë˜ëŠ” ê°’ì´ë¼ë©´, ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ìƒˆë¡­ê²Œ ë Œë”ë§ ë  ë•Œë§ˆë‹¤
  ìƒˆë¡œìš´ ê°’ì´ ìì‹ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬ë˜ë¯€ë¡œ ìì‹ ì»´í¬ë„ŒíŠ¸ë„ ìƒˆë¡­ê²Œ ë Œë”ë§ ëœë‹¤. */
}

/* 
ì´ëŸ° ì‹ì´ë¼ë©´ ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ê°€ ì—…ë°ì´íŠ¸ ë  ë•Œë§ˆë‹¤ ìì‹ê³¼ ìì‹ì˜ ìì‹.. ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë‹¤ ë¦¬ë Œë„ ëœë‹¤. 
í•˜ì§€ë§Œ ë¦¬ë Œë”ë§ì´ ë˜ë”ë¼ë„ ë¦¬ì—‘íŠ¸ì—ì„œëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ê°€ì¥ ë”ì„ ê°€ì§€ê³  ìˆê³  ì‹¤ì œë¡œ ì—†ë°ì´íŠ¸ ë˜ëŠ” ìš”ì†Œë§Œ ì—…ë°ì´íŠ¸ í•˜ê¸° ë•Œë¬¸ì— 
ëª¨ë‘ ë¦¬ë Œë” ëœë‹¤ê³  í•´ë„ ì‹¤ì œ ë¸Œë¼ìš°ì € ë” ìš”ì†Œì—ì„œëŠ” ì „ì²´ê°€ ì—…ë°ì´íŠ¸ ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. 
ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œ í—¤ë¹„í•œ ì¼ì„ í•˜ì§€ ì•ŠëŠ” ì´ìƒ ê·¸ë‹¥ í¬ê²Œ ì„±ëŠ¥ì— ì˜í–¥ì„ ì£¼ì§€ëŠ” ì•ŠëŠ”ë‹¤. 
ê°€ìƒ ë”ë„ ìˆì§€ë§Œ ë¦¬ì—‘íŠ¸ íŒ€ì—ì„œë„ ì•Œì•„ì„œ ë¦¬ë Œë” í•˜ì§€ ì•Ší† ë¡ ì—´ì‹¬íˆ ì—…ë°ì´íŠ¸ í•˜ëŠ”ì¤‘ì´ë‹¤.
*/

// í—¤ë¹„í•œ ì¼ì„ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¼ë©´? -> ì•ìœ¼ë¡œ ë°°ìš¸ Memo, useMemo, useCallbackì„ ì‚¬ìš©í•´ì„œ
// ë§¤ë²ˆ í˜¸ì¶œë˜ì§€ ì•Ší† ë¡ í•  ìˆ˜ ìˆë‹¤. ì¦‰, í•„ìš”í•œ ê³³ì—ì„œ ì„±ëŠ¥ê°œì„ ì„ í•´ ì£¼ë©´ ëœë‹¤.

function Button({ text, onClick }) {
  console.log('Button', text, 're-rendering ğŸ˜œ');
  return (
    <button
      onClick={onClick}
      style={{
        backgroundColor: 'black',
        color: 'white',
        borderRadius: '20px',
        margin: '0.4rem',
      }}
    >
      {text}
    </button>
  );
}

const initialPerson = {
  name: 'ì—˜ë¦¬',
  title: 'ê°œë°œì',
  mentors: [
    {
      name: 'ë°¥',
      title: 'ì‹œë‹ˆì–´ê°œë°œì',
    },
    {
      name: 'ì œì„ìŠ¤',
      title: 'ì‹œë‹ˆì–´ê°œë°œì',
    },
  ],
};
